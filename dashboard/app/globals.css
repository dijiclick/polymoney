@tailwind base;
@tailwind components;
@tailwind utilities;

/* Light theme (default) */
:root {
  --foreground-rgb: 15, 23, 42;
  --background: #f8fafc;
  --bg-nav: rgba(248, 250, 252, 0.92);
  --border-nav: rgba(0, 0, 0, 0.08);
  --surface: rgba(0, 0, 0, 0.02);
  --surface-border: rgba(0, 0, 0, 0.08);
  --surface-hover: rgba(0, 0, 0, 0.04);
  --input-bg: rgba(255, 255, 255, 0.8);
  --input-border: rgba(0, 0, 0, 0.12);
  --popover-bg: #ffffff;
  --popover-border: rgba(0, 0, 0, 0.12);
  --scrollbar-thumb: rgba(0, 0, 0, 0.15);
  --scrollbar-hover: rgba(0, 0, 0, 0.25);
  --gradient-text-from: #0f172a;
  --gradient-text-to: #64748b;
  --text-primary: #0f172a;
  --text-secondary: #334155;
  --text-tertiary: #64748b;
  --text-muted: #94a3b8;
}

/* Dark theme */
.dark {
  --foreground-rgb: 255, 255, 255;
  --background: #0a0a0f;
  --bg-nav: rgba(10, 10, 15, 0.85);
  --border-nav: rgba(255, 255, 255, 0.06);
  --surface: rgba(255, 255, 255, 0.02);
  --surface-border: rgba(255, 255, 255, 0.06);
  --surface-hover: rgba(255, 255, 255, 0.04);
  --input-bg: rgba(255, 255, 255, 0.04);
  --input-border: rgba(255, 255, 255, 0.08);
  --popover-bg: #12121a;
  --popover-border: rgba(255, 255, 255, 0.1);
  --scrollbar-thumb: rgba(255, 255, 255, 0.25);
  --scrollbar-hover: rgba(255, 255, 255, 0.4);
  --gradient-text-from: #ffffff;
  --gradient-text-to: #9ca3af;
  --text-primary: #ffffff;
  --text-secondary: #e2e8f0;
  --text-tertiary: #94a3b8;
  --text-muted: #64748b;
}

body {
  color: rgb(var(--foreground-rgb));
  background: var(--background);
  min-height: 100dvh;
  -webkit-text-size-adjust: 100%;
}

/* iOS touch scrolling */
.overflow-auto,
.overflow-y-auto,
.overflow-x-auto {
  -webkit-overflow-scrolling: touch;
}

/* Safe area padding for bottom elements on notched devices */
footer {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.03);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb);
  border-radius: 5px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-hover);
  border: 2px solid transparent;
  background-clip: padding-box;
}

/* Smooth animations */
@keyframes pulse-slow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

.animate-pulse-slow {
  animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

/* Trade flash animations */
@keyframes trade-flash-buy {
  0% { background-color: rgba(52, 211, 153, 0.08); }
  100% { background-color: transparent; }
}
@keyframes trade-flash-sell {
  0% { background-color: rgba(248, 113, 113, 0.08); }
  100% { background-color: transparent; }
}
.animate-trade-flash-buy {
  animation: trade-flash-buy 1.5s ease-out forwards;
}
.animate-trade-flash-sell {
  animation: trade-flash-sell 1.5s ease-out forwards;
}

/* Glass effect */
.glass {
  background: var(--surface);
  backdrop-filter: blur(12px);
  border: 1px solid var(--surface-border);
}

/* Gradient text */
.gradient-text {
  background: linear-gradient(to right, var(--gradient-text-from), var(--gradient-text-to));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Focus styles */
*:focus-visible {
  outline: 2px solid rgba(59, 130, 246, 0.5);
  outline-offset: 2px;
}

/* Selection */
::selection {
  background: rgba(59, 130, 246, 0.3);
}

/* ============================================
   LIGHT MODE OVERRIDES
   ============================================ */

/* Tables */
html:not(.dark) table thead th {
  color: #475569;
}
html:not(.dark) table tbody td {
  color: #1e293b;
}
html:not(.dark) table tbody tr:hover {
  background: rgba(0, 0, 0, 0.02);
}
html:not(.dark) table thead tr {
  border-color: rgba(0, 0, 0, 0.08);
}
html:not(.dark) table tbody tr {
  border-color: rgba(0, 0, 0, 0.05);
}

/* Inputs and buttons */
html:not(.dark) input,
html:not(.dark) select {
  background: var(--input-bg);
  border-color: var(--input-border);
  color: #0f172a;
}
html:not(.dark) input::placeholder {
  color: #94a3b8;
}

/* Links */
html:not(.dark) a {
  color: inherit;
}

/* ============================================
   TEXT COLOR OVERRIDES
   ============================================ */

/* White text → dark text */
html:not(.dark) .text-white {
  color: #0f172a;
}

/* Gray text - make visible on light backgrounds */
html:not(.dark) .text-gray-200 {
  color: #1e293b;
}
html:not(.dark) .text-gray-300 {
  color: #334155;
}
html:not(.dark) .text-gray-400 {
  color: #475569;
}
html:not(.dark) .text-gray-500 {
  color: #64748b;
}
html:not(.dark) .text-gray-600 {
  color: #94a3b8;
}

/* Semantic colors - darker for light mode */
html:not(.dark) .text-emerald-400 {
  color: #059669;
}
html:not(.dark) .text-emerald-300 {
  color: #10b981;
}
html:not(.dark) .text-red-400 {
  color: #dc2626;
}
html:not(.dark) .text-red-300 {
  color: #ef4444;
}
html:not(.dark) .text-amber-400 {
  color: #d97706;
}
html:not(.dark) .text-amber-300 {
  color: #f59e0b;
}
html:not(.dark) .text-blue-400 {
  color: #2563eb;
}
html:not(.dark) .text-blue-300 {
  color: #3b82f6;
}
html:not(.dark) .text-purple-400 {
  color: #7c3aed;
}
html:not(.dark) .text-purple-300 {
  color: #8b5cf6;
}
html:not(.dark) .text-cyan-300 {
  color: #06b6d4;
}
html:not(.dark) .text-pink-300 {
  color: #ec4899;
}
html:not(.dark) .text-teal-300 {
  color: #14b8a6;
}

/* Hover text */
html:not(.dark) .hover\:text-white:hover {
  color: #0f172a;
}
html:not(.dark) .hover\:text-gray-300:hover {
  color: #334155;
}
html:not(.dark) .hover\:text-gray-400:hover {
  color: #475569;
}
html:not(.dark) .hover\:text-amber-400:hover {
  color: #d97706;
}
html:not(.dark) .hover\:text-amber-300:hover {
  color: #f59e0b;
}
html:not(.dark) .hover\:text-purple-400:hover {
  color: #7c3aed;
}
html:not(.dark) .hover\:text-red-400:hover {
  color: #dc2626;
}

/* ============================================
   BACKGROUND COLOR OVERRIDES
   ============================================ */

/* Semi-transparent white backgrounds → subtle dark */
html:not(.dark) .bg-white\/\[0\.02\] {
  background: rgba(0, 0, 0, 0.015);
}
html:not(.dark) .bg-white\/\[0\.03\] {
  background: rgba(0, 0, 0, 0.02);
}
html:not(.dark) .bg-white\/\[0\.04\] {
  background: rgba(0, 0, 0, 0.025);
}
html:not(.dark) .bg-white\/5 {
  background: rgba(0, 0, 0, 0.03);
}
html:not(.dark) .bg-white\/10 {
  background: rgba(0, 0, 0, 0.05);
}
html:not(.dark) .bg-white\/15 {
  background: rgba(0, 0, 0, 0.07);
}
html:not(.dark) .bg-white\/20 {
  background: rgba(0, 0, 0, 0.08);
}

/* Hover backgrounds */
html:not(.dark) .hover\:bg-white\/\[0\.02\]:hover {
  background: rgba(0, 0, 0, 0.03);
}
html:not(.dark) .hover\:bg-white\/\[0\.08\]:hover {
  background: rgba(0, 0, 0, 0.05);
}
html:not(.dark) .hover\:bg-white\/5:hover {
  background: rgba(0, 0, 0, 0.04);
}
html:not(.dark) .hover\:bg-white\/10:hover {
  background: rgba(0, 0, 0, 0.06);
}
html:not(.dark) .hover\:bg-white\/15:hover {
  background: rgba(0, 0, 0, 0.08);
}
html:not(.dark) .hover\:bg-white\/\[0\.06\]:hover {
  background: rgba(0, 0, 0, 0.04);
}
html:not(.dark) .active\:bg-white\/\[0\.06\]:active {
  background: rgba(0, 0, 0, 0.04);
}

/* Semantic backgrounds - increase opacity for light mode */
html:not(.dark) .bg-emerald-500\/10 {
  background: rgba(5, 150, 105, 0.12);
}
html:not(.dark) .bg-emerald-500\/15 {
  background: rgba(5, 150, 105, 0.15);
}
html:not(.dark) .bg-emerald-500\/20 {
  background: rgba(5, 150, 105, 0.18);
}
html:not(.dark) .bg-red-500\/10 {
  background: rgba(220, 38, 38, 0.12);
}
html:not(.dark) .bg-red-500\/15 {
  background: rgba(220, 38, 38, 0.15);
}
html:not(.dark) .bg-amber-500\/10 {
  background: rgba(245, 158, 11, 0.12);
}
html:not(.dark) .bg-amber-500\/15 {
  background: rgba(245, 158, 11, 0.15);
}
html:not(.dark) .bg-amber-500\/20 {
  background: rgba(245, 158, 11, 0.18);
}
html:not(.dark) .bg-blue-500\/5 {
  background: rgba(37, 99, 235, 0.06);
}
html:not(.dark) .bg-blue-500\/10 {
  background: rgba(37, 99, 235, 0.12);
}
html:not(.dark) .bg-blue-500\/15 {
  background: rgba(37, 99, 235, 0.15);
}
html:not(.dark) .bg-blue-500\/20 {
  background: rgba(37, 99, 235, 0.18);
}
html:not(.dark) .bg-purple-500\/15 {
  background: rgba(124, 58, 237, 0.15);
}
html:not(.dark) .bg-cyan-500\/15 {
  background: rgba(6, 182, 212, 0.15);
}
html:not(.dark) .bg-pink-500\/15 {
  background: rgba(236, 72, 153, 0.15);
}
html:not(.dark) .bg-teal-500\/15 {
  background: rgba(20, 184, 166, 0.15);
}

/* Hover semantic backgrounds */
html:not(.dark) .hover\:bg-blue-500\/5:hover {
  background: rgba(37, 99, 235, 0.08);
}
html:not(.dark) .hover\:bg-red-500\/10:hover {
  background: rgba(220, 38, 38, 0.15);
}

/* Dark specific backgrounds → light equivalents */
html:not(.dark) .bg-\[\#12121a\] {
  background: #ffffff;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}
html:not(.dark) .bg-\[\#0d0d12\] {
  background: #ffffff;
}
html:not(.dark) .bg-\[\#0a0a0f\] {
  background: var(--background);
}
html:not(.dark) .bg-\[\#0a0a0f\]\/80 {
  background: var(--bg-nav);
}
html:not(.dark) .bg-gray-900 {
  background: #f1f5f9;
}
html:not(.dark) .bg-black\/50 {
  background: rgba(0, 0, 0, 0.35);
}
html:not(.dark) .bg-black\/60 {
  background: rgba(0, 0, 0, 0.4);
}
html:not(.dark) .bg-black\/70 {
  background: rgba(0, 0, 0, 0.45);
}

/* ============================================
   BORDER COLOR OVERRIDES
   ============================================ */

html:not(.dark) .border-white\/5 {
  border-color: rgba(0, 0, 0, 0.06);
}
html:not(.dark) .border-white\/10 {
  border-color: rgba(0, 0, 0, 0.08);
}
html:not(.dark) .border-white\/15 {
  border-color: rgba(0, 0, 0, 0.1);
}
html:not(.dark) .border-white\/20 {
  border-color: rgba(0, 0, 0, 0.12);
}
html:not(.dark) .border-white\/\[0\.02\] {
  border-color: rgba(0, 0, 0, 0.04);
}
html:not(.dark) .border-white\/\[0\.05\] {
  border-color: rgba(0, 0, 0, 0.06);
}
html:not(.dark) .border-white\/\[0\.06\] {
  border-color: rgba(0, 0, 0, 0.07);
}

/* Semantic borders */
html:not(.dark) .border-blue-500\/20 {
  border-color: rgba(37, 99, 235, 0.25);
}
html:not(.dark) .border-blue-500\/30 {
  border-color: rgba(37, 99, 235, 0.35);
}
html:not(.dark) .border-blue-500\/50 {
  border-color: rgba(37, 99, 235, 0.5);
}
html:not(.dark) .border-emerald-500\/25 {
  border-color: rgba(5, 150, 105, 0.3);
}
html:not(.dark) .border-emerald-500\/30 {
  border-color: rgba(5, 150, 105, 0.35);
}
html:not(.dark) .border-amber-500\/30 {
  border-color: rgba(245, 158, 11, 0.35);
}
html:not(.dark) .border-red-500\/30 {
  border-color: rgba(220, 38, 38, 0.35);
}
html:not(.dark) .border-purple-500\/30 {
  border-color: rgba(124, 58, 237, 0.35);
}
html:not(.dark) .border-cyan-500\/30 {
  border-color: rgba(6, 182, 212, 0.35);
}
html:not(.dark) .border-pink-500\/30 {
  border-color: rgba(236, 72, 153, 0.35);
}
html:not(.dark) .border-teal-500\/30 {
  border-color: rgba(20, 184, 166, 0.35);
}

/* Hover borders */
html:not(.dark) .hover\:border-white\/20:hover {
  border-color: rgba(0, 0, 0, 0.15);
}
html:not(.dark) .hover\:border-blue-500\/20:hover {
  border-color: rgba(37, 99, 235, 0.3);
}

/* Focus borders */
html:not(.dark) .focus\:border-white\/20:focus {
  border-color: rgba(0, 0, 0, 0.2);
}
html:not(.dark) .focus\:border-blue-500\/50:focus {
  border-color: rgba(37, 99, 235, 0.5);
}

/* Dividers */
html:not(.dark) .divide-white\/\[0\.02\] > * + * {
  border-color: rgba(0, 0, 0, 0.05);
}

/* ============================================
   SHADOWS & EFFECTS
   ============================================ */

html:not(.dark) .shadow-2xl {
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.12);
}
html:not(.dark) .shadow-xl {
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

/* ============================================
   SCROLLBAR FOR LIGHT MODE
   ============================================ */

html:not(.dark) ::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.02);
}
html:not(.dark) ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.12);
}
html:not(.dark) ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

/* ============================================
   GRADIENT OVERRIDES
   ============================================ */

html:not(.dark) .bg-gradient-to-r.from-white.to-gray-400 {
  --tw-gradient-from: #0f172a;
  --tw-gradient-to: #64748b;
}

/* ============================================
   COMPONENT-SPECIFIC FIXES
   ============================================ */

/* Spinner/loader borders */
html:not(.dark) .border-t-white\/30 {
  border-top-color: rgba(0, 0, 0, 0.3);
}
html:not(.dark) .border-t-white\/40 {
  border-top-color: rgba(0, 0, 0, 0.4);
}

/* Ring/outline colors */
html:not(.dark) .ring-white\/10 {
  --tw-ring-color: rgba(0, 0, 0, 0.08);
}

/* ============================================
   MOBILE OPTIMIZATIONS
   ============================================ */

/* Ensure touch scrolling works smoothly everywhere */
@media (max-width: 768px) {
  /* Better scroll containers on mobile */
  [data-scroll-container] {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Make sticky headers respect mobile viewport */
  .sticky {
    position: -webkit-sticky;
    position: sticky;
  }

  /* Prevent text selection during scroll on mobile */
  table {
    -webkit-user-select: none;
    user-select: none;
  }
  table a, table button {
    -webkit-user-select: auto;
    user-select: auto;
  }
}
